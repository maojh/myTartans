<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="a_data/p5.js" crossorigin=""></script>
    <script src="a_data/p5_002.js" crossorigin=""></script>
    
    <meta charset="utf-8">

  <!-- base href="https://editor.p5js.org/Otemate/sketches/61SuxxEAz/" --><style>
html, body {
  margin: 0;
  padding: 0;
}
canvas {
  display: block;
}
</style><script src="a_data/previewScripts.js"></script><style data-emotion=""></style><script>
    function getScriptOff(line) {
      var offs = [[70,"sketch"]];
      var l = 0;
      var file = '';
      for (var i=0; i<offs.length; i++) {
        var n = offs[i][0];
        if (n < line && n > l) {
          l = n;
          file = offs[i][1];
        }
      }
      return [line - l, file];
    }
    // catch reference errors, via http://stackoverflow.com/a/12747364/2994108
    window.onerror = function (msg, url, lineNumber, columnNo, error) {
        var string = msg.toLowerCase();
        var substring = "script error";
        var data = {};
        if (url.match(/^(http:\/\/|https:\/\/)/) !== null && error.stack){
          var errorNum = error.stack.split('about:srcdoc:')[1].split(':')[0];
          var fileInfo = getScriptOff(errorNum);
          data = msg + ' (' + fileInfo[1] + ': line ' + fileInfo[0] + ')';
        } else {
          var fileInfo = getScriptOff(lineNumber);
          data = msg + ' (' + fileInfo[1] + ': line ' + fileInfo[0] + ')';
        }
        window.parent.postMessage([{
          log: [{
            method: 'error',
            data: [data],
            id: Date.now().toString()
          }],
          source: fileInfo[1]
        }], '*');
      return false;
    };
    // catch rejected promises
    window.onunhandledrejection = function (event) {
      if (event.reason && event.reason.message && event.reason.stack){
        var errorNum = event.reason.stack.split('about:srcdoc:')[1].split(':')[0];
        var fileInfo = getScriptOff(errorNum);
        var data = event.reason.message + ' (' + fileInfo[1] + ': line ' + fileInfo[0] + ')';
        window.parent.postMessage([{
          log: [{
            method: 'error',
            data: [data],
            id: Date.now().toString()
          }],
          source: fileInfo[1]
        }], '*');
      }
    };
  </script></head>
  <body>
    <script data-tag="@fs-sketch.js">//Procedural tartan experiment
// by Alka Cappellazzo and Matteo Testa

let animation = true;

let colors = ['#000254','#006534','#990000','#ff0000','#029d29','#0197d0','#ec2023','#1a1850','#023233','#ec2023','#d2a385'];
let currColors = [];

function setup() {
  createCanvas(400, 400);
  background(255);
  // noLoop();
  frameRate(10);
  
  // let colIndex = int(random(0,colors.length/2))
  currColors[0]  = colors[int(random(0,colors.length))];
  currColors[1]  = colors[int(random(0,colors.length))];
  currColors[2]  = colors[int(random(0,colors.length))];
    currColors[3]  = colors[int(random(0,colors.length))]; //back
  
  background(currColors[3]);
}

let c = 0;
let cend = 600;

function draw() {
  if(animation) {
  // Vertical large lines with opacity
    let s = 30+4*c;
    stroke(currColors[0]+'99');
    strokeWeight(20);
    line(s - 10, 0, s - 10, 600);
    
    // Horizontal large ellipse with opacity
    for (var sx = 0; sx < 600; sx += 4) {
      stroke(currColors[1]+'88');
      strokeWeight(1);
      fill(255,15);
      arc(sx,s, 20, 20, QUARTER_PI, HALF_PI+PI);
      // ellipse(sx, s, 20, 20);
    }
  
  // Vertical small black lines
    let ff = c*4 +10;
    stroke(currColors[0]+'88');
    strokeWeight(1);
    line(ff, 0, ff, 600);

  
  // Horizontal large lines
     let hl = c*8 + 30;
      strokeWeight(10);
      stroke(currColors[1]+'88');
      line(0, hl, 600, hl);      
  
     // Horizontal white lines
    let f = c*4 + 10;
    stroke(currColors[2]+'88');
    strokeWeight(2);
    line(0, f, 600, f);

    // Vertical large lines
      let d = 30+c*8;
      stroke(currColors[0]+'88');
      strokeWeight(10);

      for (var dx = 0; dx < 600; dx += 3) {
        stroke(currColors[1]+'88');
        strokeWeight(1);
        // fill(currColors[1]+'88');
        ellipse(d, dx, 10, 10);
      }
  
  c += 10;
  if(c>cend) {
    print("end");
    noLoop();
  }
    
    
  } else {
    
    
      background(currColors[3]+'ff');
      // Vertical large lines with opacity
  for (var s = 0; s < 600; s += 40) {
    stroke(currColors[0]+'88');
    strokeWeight(20);
    line(s - 10, 0, s - 10, 600);
    
    // Vertical large ellipse with opacity
    for (var sx = 0; sx < 600; sx += 3) {
      stroke(currColors[1]+'88');
      strokeWeight(1);
      ellipse(sx, s, 20, 20);
    }
  }
  
  // Horizontal white lines
  for (var f = 17; f < 600; f += 80) {
    stroke(currColors[0]+'88');
    strokeWeight(1);
    line(0, f, 600, f);
  }
  
  // Veritcal small lines
  for (var f = 10; f < 600; f += 40) {
    stroke(currColors[1]+'88');
    strokeWeight(1);
    line(f, 0, f, 600);
  }
  
  // Horizontal large lines
  for (var i = 30; i < 600; i += 80) {
    stroke(currColors[2]+'44');
    strokeWeight(10);
    //ellipse(i, i, 10, i);
    line(0, i, 600, i);
  }
  
  // Vertical large lines
  for (var d = 30; d < 600; d += 80) {
    stroke(currColors[1]+'88');
    strokeWeight(10);
    
    // Vertical small ellipse 
    for (var dx = 0; dx < 600; dx += 3) {
      stroke(currColors[0]+'88');
      strokeWeight(1);
      noFill();
      // fill(currColors[1]+'77')
      ellipse(d, dx, 10, 10);
    }
  }
  }
}



function mousePressed() {
  save("myTartan.png");
}

</script>
  

<main><canvas id="defaultCanvas0" class="p5Canvas" style="width: 400px; height: 400px;" width="800" height="800"></canvas></main></body></html>